"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[3057],{3070:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var n=t(6540),a=t(1656),r=t(4164);const i="chatbotContainer_GHlo",l="chatHeader_pqTY",c="headerLeft_dEvG",o="headerIcon_imYC",d="headerTitle_HhMZ",h="statusDot_w4wX",u="connected_D2MZ",m="disconnected_tr1H",p="clearButton_gr1t",x="messagesContainer_WnkM",g="emptyState_zt3N",j="emptyIcon_bOdS",_="emptyTitle_vY2l",v="emptySubtitle_nV4z",b="message_FbPs",f="messageContent_PuaV",y="userMessage_QhX5",N="botMessage_Yb3n",k="errorMessage_NRN8",S="codeBlock_M0vh",w="inlineCode_YV8d",A="typingIndicator_Poa2",C="selectedTextPreview_gRAs",E="selectedLabel_O1Tl",I="selectedContent_qnsv",W="clearSelection_mTeI",T="inputContainer_IgtD",L="chatInput_llk2",P="sendButton_IdVn",q="sendIcon_RdEE",M="sendingIcon_OBcX",R="sources_EU7n";var $=t(4848);const B=()=>"undefined"!=typeof window&&window.__API_URL__?window.__API_URL__:"http://localhost:8000";const Y=function(){const[e,s]=(0,n.useState)(""),[t,a]=(0,n.useState)([]),[Y,D]=(0,n.useState)(!1),[H,O]=(0,n.useState)(null),[V,z]=(0,n.useState)(null),G=(0,n.useRef)(null);(0,n.useEffect)(()=>{G.current?.scrollIntoView({behavior:"smooth"})},[t]),(0,n.useEffect)(()=>{(async()=>{try{const e=await fetch(`${B()}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});z(e.ok)}catch{z(!1)}})()},[]);const U=(0,n.useCallback)(()=>{const e=window.getSelection();e&&e.toString().trim().length>0&&O(e.toString().trim())},[]);(0,n.useEffect)(()=>(document.addEventListener("mouseup",U),document.addEventListener("keyup",U),()=>{document.removeEventListener("mouseup",U),document.removeEventListener("keyup",U)}),[U]);const F=async()=>{if(!e.trim()&&!H)return;const t=H?`[Selected: "${H.slice(0,100)}${H.length>100?"...":""}"] ${e}`:e;a(e=>[...e,{type:"user",text:t,selectedText:H||void 0}]),D(!0);try{const s=await fetch(`${B()}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,selected_text:H})});if(!s.ok)throw new Error(`Server error: ${s.status}`);const t=await s.json();a(e=>[...e,{type:"bot",text:t.response,sources:t.source_documents}])}catch(n){console.error("Error sending message:",n),a(e=>[...e,{type:"bot",text:n.message.includes("Failed to fetch")?"Unable to connect to the server. Please ensure the backend is running.":`Error: ${n.message}`,isError:!0}])}finally{D(!1),s(""),O(null)}};return(0,$.jsxs)("div",{className:i,children:[(0,$.jsxs)("div",{className:l,children:[(0,$.jsxs)("div",{className:c,children:[(0,$.jsx)("span",{className:o,children:"\ud83e\udd16"}),(0,$.jsx)("span",{className:d,children:"AI Assistant"}),(0,$.jsx)("span",{className:(0,r.A)(h,!0===V&&u,!1===V&&m)})]}),t.length>0&&(0,$.jsx)("button",{className:p,onClick:()=>{a([]),O(null)},title:"Clear chat",children:"Clear"})]}),(0,$.jsxs)("div",{className:x,children:[0===t.length&&(0,$.jsxs)("div",{className:g,children:[(0,$.jsx)("div",{className:j,children:"\ud83d\udcac"}),(0,$.jsx)("p",{className:_,children:"Start a conversation"}),(0,$.jsx)("p",{className:v,children:"Ask questions about deep learning, AI, or select text from the textbook to get explanations."})]}),t.map((e,s)=>{return(0,$.jsxs)("div",{className:(0,r.A)(b,"user"===e.type?y:N,e.isError&&k),children:[(0,$.jsx)("div",{className:f,children:"bot"===e.type?(t=e.text,t.split(/(```[\s\S]*?```)/g).map((e,s)=>{if(e.startsWith("```")&&e.endsWith("```")){const t=e.slice(3,-3),n=t.split("\n")[0],a=n&&!n.includes(" ")?t.slice(n.length+1):t;return(0,$.jsx)("pre",{className:S,children:(0,$.jsx)("code",{children:a.trim()})},s)}return(0,$.jsx)("span",{children:e.split("\n").map((e,s)=>(0,$.jsxs)(n.Fragment,{children:[s>0&&(0,$.jsx)("br",{}),e.split(/(\*\*.*?\*\*|\*.*?\*|`.*?`)/g).map((e,s)=>e.startsWith("**")&&e.endsWith("**")?(0,$.jsx)("strong",{children:e.slice(2,-2)},s):e.startsWith("*")&&e.endsWith("*")?(0,$.jsx)("em",{children:e.slice(1,-1)},s):e.startsWith("`")&&e.endsWith("`")?(0,$.jsx)("code",{className:w,children:e.slice(1,-1)},s):e)]},s))},s)})):(0,$.jsx)("p",{children:e.text})}),e.sources&&e.sources.length>0&&(0,$.jsxs)("div",{className:R,children:[(0,$.jsx)("strong",{children:"\ud83d\udcda Sources:"}),(0,$.jsx)("ul",{children:e.sources.map((e,s)=>(0,$.jsx)("li",{children:(0,$.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.title})},s))})]})]},s);var t}),Y&&(0,$.jsx)("div",{className:(0,r.A)(b,N),children:(0,$.jsxs)("div",{className:A,children:[(0,$.jsx)("span",{}),(0,$.jsx)("span",{}),(0,$.jsx)("span",{})]})}),(0,$.jsx)("div",{ref:G})]}),H&&(0,$.jsxs)("div",{className:C,children:[(0,$.jsx)("span",{className:E,children:"\ud83d\udcdd Selected:"}),(0,$.jsxs)("span",{className:I,children:['"',H.slice(0,80),H.length>80?"...":"",'"']}),(0,$.jsx)("button",{onClick:()=>O(null),className:W,children:"\u2715"})]}),(0,$.jsxs)("div",{className:T,children:[(0,$.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},placeholder:H?"Ask about the selected text...":"Ask a question about deep learning...",disabled:Y,className:L}),(0,$.jsx)("button",{onClick:F,disabled:Y||!e.trim()&&!H,className:P,children:Y?(0,$.jsx)("span",{className:M,children:"\u23f3"}):(0,$.jsx)("span",{className:q,children:"\u27a4"})})]})]})};var D=t(1107);const H={container:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2rem 1.5rem 3rem",maxWidth:"100%"},header:{textAlign:"center",marginBottom:"2rem",maxWidth:"600px"},title:{fontSize:"2rem",fontWeight:700,letterSpacing:"-0.03em",marginBottom:"0.75rem"},subtitle:{fontSize:"1rem",color:"var(--ifm-color-emphasis-700)",lineHeight:1.6,margin:0},chatWrapper:{width:"100%",maxWidth:"800px"}};const O=function(){return(0,$.jsx)(a.A,{title:"AI Chatbot",description:"Chat with your AI Textbook using RAG. Ask questions about deep learning concepts.",children:(0,$.jsx)("main",{children:(0,$.jsxs)("div",{style:H.container,children:[(0,$.jsxs)("div",{style:H.header,children:[(0,$.jsx)(D.A,{as:"h1",style:H.title,children:"AI Learning Assistant"}),(0,$.jsx)("p",{style:H.subtitle,children:"Ask questions about the textbook content and get instant, contextual answers. You can also select text on any page to ask specific questions about it."})]}),(0,$.jsx)("div",{style:H.chatWrapper,children:(0,$.jsx)(Y,{})})]})})})}}}]);